<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>For My Akka ğŸ¤</title>
<meta name="description" content="A farewell from the heart â€” for the one who became more than a lecturer."/>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,700;1,400;1,500&family=Inter:wght@300;400;500&display=swap" rel="stylesheet"/>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --midnight: #0f172a;
    --deep: #0a0f1e;
    --purple1: #1e1040;
    --purple2: #2d1b69;
    --rose: #f9a8d4;
    --rose-dim: rgba(249,168,212,0.15);
    --rose-glow: rgba(249,168,212,0.4);
    --gold: #d4a853;
    --gold-dim: rgba(212,168,83,0.15);
    --white: #f8fafc;
    --muted: rgba(248,250,252,0.55);
    --glass: rgba(255,255,255,0.04);
    --glass-border: rgba(255,255,255,0.08);
  }

  html { scroll-behavior: smooth; }

  body {
    background: var(--deep);
    color: var(--white);
    font-family: 'Inter', sans-serif;
    font-weight: 300;
    line-height: 1.7;
    overflow-x: hidden;
    cursor: auto;
  }

  /* â”€â”€ CUSTOM CURSOR â”€â”€ */
  #cursor {
    width: 12px; height: 12px;
    background: var(--rose);
    border-radius: 50%;
    position: fixed; top: 0; left: 0;
    pointer-events: none;
    z-index: 99999;
    transform: translate(-50%, -50%);
    transition: transform 0.08s ease, width 0.2s ease, height 0.2s ease, background 0.2s ease;
    mix-blend-mode: screen;
  }
  #cursor-ring {
    width: 36px; height: 36px;
    border: 1px solid rgba(249,168,212,0.4);
    border-radius: 50%;
    position: fixed; top: 0; left: 0;
    pointer-events: none;
    z-index: 99998;
    transform: translate(-50%, -50%);
    transition: transform 0.18s ease, width 0.25s ease, height 0.25s ease;
  }

  /* â”€â”€ PASSWORD GATE â”€â”€ */
  #gate {
    position: fixed; inset: 0;
    display: flex; align-items: center; justify-content: center;
    z-index: 9999;
    background: radial-gradient(ellipse at 30% 40%, #1e1040 0%, #0a0f1e 60%, #0f172a 100%);
    transition: opacity 1.2s ease, filter 1.2s ease;
  }
  #gate.dissolve { opacity: 0; filter: blur(20px); pointer-events: none; }

  #gate-canvas {
    position: absolute; inset: 0;
    pointer-events: none;
  }

  .gate-panel {
    position: relative; z-index: 2;
    text-align: center;
    padding: 3rem 3.5rem;
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.07);
    border-radius: 24px;
    backdrop-filter: blur(24px);
    max-width: 420px; width: 90%;
    animation: fadeUp 1.2s ease both;
  }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(30px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .gate-symbol {
    font-size: 2.4rem;
    margin-bottom: 1.2rem;
    animation: pulse-glow 3s ease-in-out infinite;
  }
  @keyframes pulse-glow {
    0%, 100% { text-shadow: 0 0 20px rgba(249,168,212,0.3); }
    50% { text-shadow: 0 0 40px rgba(249,168,212,0.7); }
  }

  .gate-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem;
    font-weight: 500;
    color: var(--white);
    margin-bottom: 0.4rem;
    letter-spacing: 0.02em;
  }
  .gate-sub {
    font-size: 0.78rem;
    color: var(--muted);
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-bottom: 2rem;
  }

  .input-wrap {
    position: relative;
    margin-bottom: 1.2rem;
  }
  #pwd-input {
    width: 100%;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 10px;
    padding: 0.85rem 1.2rem;
    color: var(--white);
    font-family: 'Inter', sans-serif;
    font-size: 1rem;
    letter-spacing: 0.15em;
    outline: none;
    text-align: center;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
  }
  #pwd-input::placeholder { color: rgba(255,255,255,0.25); letter-spacing: 0.05em; }
  #pwd-input:focus {
    border-color: rgba(249,168,212,0.5);
    box-shadow: 0 0 0 3px rgba(249,168,212,0.1), 0 0 20px rgba(249,168,212,0.15);
  }
  #pwd-input.shake {
    animation: shake 0.4s ease;
    border-color: rgba(239,68,68,0.5);
    box-shadow: 0 0 0 3px rgba(239,68,68,0.1), 0 0 20px rgba(239,68,68,0.15);
  }
  @keyframes shake {
    0%,100%{transform:translateX(0)}
    20%{transform:translateX(-8px)}
    40%{transform:translateX(8px)}
    60%{transform:translateX(-6px)}
    80%{transform:translateX(6px)}
  }

  .gate-btn {
    width: 100%;
    padding: 0.85rem;
    background: linear-gradient(135deg, rgba(249,168,212,0.15), rgba(212,168,83,0.1));
    border: 1px solid rgba(249,168,212,0.25);
    border-radius: 10px;
    color: var(--white);
    font-family: 'Playfair Display', serif;
    font-size: 0.95rem;
    letter-spacing: 0.08em;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  .gate-btn:hover {
    background: linear-gradient(135deg, rgba(249,168,212,0.25), rgba(212,168,83,0.18));
    box-shadow: 0 0 30px rgba(249,168,212,0.2);
    transform: translateY(-1px);
  }
  .gate-hint { font-size: 0.7rem; color: rgba(255,255,255,0.18); margin-top: 1.5rem; letter-spacing: 0.1em; }
  .gate-error {
    font-size: 0.75rem;
    color: rgba(239,68,68,0.8);
    min-height: 1.2rem;
    margin-bottom: 0.5rem;
    transition: opacity 0.3s;
  }

  /* â”€â”€ MAIN CONTENT â”€â”€ */
  #main { opacity: 0; transition: opacity 1.5s ease 0.3s; }
  #main.visible { opacity: 1; }

  /* â”€â”€ HERO â”€â”€ */
  #hero {
    position: relative;
    height: 100vh;
    display: flex; align-items: center; justify-content: center;
    overflow: hidden;
  }
  #galaxy-canvas {
    position: absolute; inset: 0;
    width: 100%; height: 100%;
  }
  .vignette {
    position: absolute; inset: 0;
    background: radial-gradient(ellipse at center, transparent 30%, rgba(10,15,30,0.85) 100%);
    pointer-events: none;
  }
  .hero-text {
    position: relative; z-index: 2;
    text-align: center;
    padding: 0 1.5rem;
  }
  .hero-eyebrow {
    font-size: 0.72rem;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--gold);
    opacity: 0;
    transform: translateY(15px);
    animation: revealUp 0.9s ease 0.5s forwards;
    margin-bottom: 1.2rem;
  }
  .hero-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(3rem, 8vw, 6rem);
    font-weight: 500;
    line-height: 1.1;
    opacity: 0;
    transform: translateY(20px);
    animation: revealUp 1s ease 0.9s forwards;
    margin-bottom: 1.5rem;
  }
  .hero-title span { color: var(--rose); }
  .hero-sub {
    font-family: 'Playfair Display', serif;
    font-style: italic;
    font-size: clamp(1rem, 2.5vw, 1.3rem);
    color: var(--muted);
    opacity: 0;
    transform: translateY(15px);
    animation: revealUp 0.9s ease 1.4s forwards;
    max-width: 520px;
    margin: 0 auto 2.5rem;
  }
  .hero-scroll {
    opacity: 0;
    animation: revealUp 0.8s ease 2s forwards, bobble 2.5s ease 2.8s infinite;
    font-size: 0.7rem; letter-spacing: 0.2em; text-transform: uppercase;
    color: rgba(255,255,255,0.3);
  }
  @keyframes revealUp {
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes bobble {
    0%,100%{transform:translateY(0)}
    50%{transform:translateY(6px)}
  }

  /* â”€â”€ SECTIONS â”€â”€ */
  section { position: relative; padding: 6rem 1.5rem; }
  .container { max-width: 860px; margin: 0 auto; }
  .section-label {
    font-size: 0.68rem; letter-spacing: 0.25em; text-transform: uppercase;
    color: var(--gold); margin-bottom: 0.8rem; opacity: 0.8;
  }
  .section-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 500;
    margin-bottom: 1rem;
    line-height: 1.25;
  }

  /* reveal on scroll */
  .reveal {
    opacity: 0; transform: translateY(40px);
    transition: opacity 0.9s ease, transform 0.9s ease;
  }
  .reveal.in-view { opacity: 1; transform: translateY(0); }

  /* â”€â”€ ENVELOPE â”€â”€ */
  #envelope-section {
    min-height: 60vh;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    background: linear-gradient(180deg, var(--deep) 0%, #0c0a1a 50%, var(--deep) 100%);
  }
  .env-wrap {
    perspective: 1200px;
    cursor: pointer;
    margin-top: 2.5rem;
  }
  .envelope {
    position: relative;
    width: 300px; height: 200px;
    transform-style: preserve-3d;
    transition: transform 0.4s ease;
  }
  .envelope:hover { transform: rotateX(-5deg) rotateY(3deg) scale(1.03); }
  .env-body {
    position: absolute; inset: 0;
    background: linear-gradient(135deg, #1a1230, #261a50);
    border-radius: 6px;
    border: 1px solid rgba(212,168,83,0.2);
    box-shadow: 0 20px 60px rgba(0,0,0,0.5), 0 0 40px rgba(212,168,83,0.08);
    overflow: hidden;
  }
  .env-flap {
    position: absolute; top: 0; left: 0; right: 0;
    height: 50%;
    background: linear-gradient(170deg, #1f1640, #2d1b69);
    clip-path: polygon(0 0, 100% 0, 50% 100%);
    transform-origin: top center;
    transition: transform 0.8s cubic-bezier(0.4,0,0.2,1);
    border-bottom: 1px solid rgba(212,168,83,0.15);
    z-index: 2;
  }
  .envelope.open .env-flap { transform: rotateX(180deg); }
  .env-label {
    position: absolute; inset: 0;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    padding-top: 1.5rem;
  }
  .env-to {
    font-family: 'Playfair Display', serif;
    font-style: italic;
    font-size: 0.95rem;
    color: rgba(255,255,255,0.6);
    margin-bottom: 0.2rem;
  }
  .env-name {
    font-family: 'Playfair Display', serif;
    font-size: 1.3rem;
    color: var(--gold);
    letter-spacing: 0.05em;
  }
  .env-hint {
    margin-top: 1.2rem;
    font-size: 0.7rem; letter-spacing: 0.2em;
    color: rgba(255,255,255,0.25);
    text-transform: uppercase;
    animation: bobble 2.5s ease infinite;
  }

  /* Letter reveal */
  #letter-reveal {
    position: fixed; inset: 0;
    z-index: 888;
    display: flex; align-items: center; justify-content: center;
    background: rgba(10,15,30,0.92);
    backdrop-filter: blur(12px);
    opacity: 0; pointer-events: none;
    transition: opacity 0.6s ease;
    padding: 1.5rem;
  }
  #letter-reveal.open { opacity: 1; pointer-events: all; }
  .letter-paper {
    background: linear-gradient(160deg, #12102a, #1a1235);
    border: 1px solid rgba(249,168,212,0.12);
    border-radius: 16px;
    padding: 3rem 2.8rem;
    max-width: 640px; width: 100%;
    max-height: 85vh; overflow-y: auto;
    box-shadow: 0 0 80px rgba(249,168,212,0.1), 0 30px 60px rgba(0,0,0,0.5);
    position: relative;
    transform: translateY(30px);
    transition: transform 0.7s cubic-bezier(0.2,0,0,1) 0.2s;
  }
  #letter-reveal.open .letter-paper { transform: translateY(0); }
  .letter-paper::-webkit-scrollbar { width: 4px; }
  .letter-paper::-webkit-scrollbar-track { background: transparent; }
  .letter-paper::-webkit-scrollbar-thumb { background: rgba(249,168,212,0.2); border-radius: 2px; }
  .close-btn {
    position: absolute; top: 1rem; right: 1.2rem;
    background: none; border: none; color: rgba(255,255,255,0.3);
    font-size: 1.4rem; cursor: pointer; transition: color 0.2s;
  }
  .close-btn:hover { color: var(--rose); }
  #typewriter-text {
    font-family: 'Playfair Display', serif;
    font-size: clamp(0.9rem, 2vw, 1.05rem);
    line-height: 1.95;
    color: rgba(248,250,252,0.88);
    white-space: pre-wrap;
  }
  .cursor-blink {
    display: inline-block;
    width: 2px; height: 1.1em;
    background: var(--rose);
    margin-left: 2px;
    vertical-align: middle;
    animation: blink 1s step-end infinite;
  }
  @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0} }

  /* â”€â”€ CARDS â”€â”€ */
  #cards-section { background: linear-gradient(180deg, var(--deep), #0c0a1a); }
  .cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.2rem;
    margin-top: 2.5rem;
  }
  .glass-card {
    background: var(--glass);
    border: 1px solid var(--glass-border);
    border-radius: 16px;
    padding: 2rem 1.5rem;
    text-align: center;
    cursor: pointer;
    transition: transform 0.35s ease, box-shadow 0.35s ease, background 0.35s ease, border-color 0.35s ease;
    position: relative; overflow: hidden;
  }
  .glass-card::before {
    content: '';
    position: absolute; inset: 0;
    background: radial-gradient(circle at 50% 0%, rgba(249,168,212,0.08) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.4s;
  }
  .glass-card:hover {
    transform: translateY(-8px) scale(1.02);
    background: rgba(255,255,255,0.07);
    border-color: rgba(249,168,212,0.2);
    box-shadow: 0 20px 60px rgba(0,0,0,0.3), 0 0 40px rgba(249,168,212,0.08);
  }
  .glass-card:hover::before { opacity: 1; }
  .card-icon { font-size: 2.2rem; margin-bottom: 0.8rem; display: block; }
  .card-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.1rem; font-weight: 500;
    color: var(--white); margin-bottom: 0.5rem;
  }
  .card-desc {
    font-size: 0.82rem;
    color: var(--muted);
    line-height: 1.6;
    max-height: 0; overflow: hidden;
    transition: max-height 0.5s ease, opacity 0.4s ease;
    opacity: 0;
  }
  .glass-card.expanded .card-desc { max-height: 200px; opacity: 1; }
  .card-sub { font-size: 0.72rem; color: rgba(212,168,83,0.6); letter-spacing: 0.1em; }

  /* â”€â”€ TIMELINE â”€â”€ */
  #timeline-section { background: var(--deep); }
  .timeline {
    position: relative;
    margin-top: 3rem;
    padding-left: 2rem;
  }
  .timeline::before {
    content: '';
    position: absolute; left: 0; top: 0; bottom: 0;
    width: 1px;
    background: linear-gradient(180deg, transparent, rgba(249,168,212,0.3) 20%, rgba(212,168,83,0.3) 80%, transparent);
  }
  .tl-item {
    position: relative;
    padding: 0 0 3.5rem 2.5rem;
    opacity: 0; transform: translateX(-20px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }
  .tl-item.in-view { opacity: 1; transform: translateX(0); }
  .tl-item::before {
    content: '';
    position: absolute; left: -5px; top: 6px;
    width: 10px; height: 10px; border-radius: 50%;
    background: var(--rose);
    box-shadow: 0 0 15px rgba(249,168,212,0.5);
  }
  .tl-phase {
    font-size: 0.65rem; letter-spacing: 0.2em; text-transform: uppercase;
    color: var(--gold); opacity: 0.7; margin-bottom: 0.3rem;
  }
  .tl-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.25rem; font-weight: 500;
    margin-bottom: 0.5rem;
  }
  .tl-body { font-size: 0.88rem; color: var(--muted); max-width: 480px; line-height: 1.75; }

  /* â”€â”€ PROMISE â”€â”€ */
  #promise-section {
    min-height: 70vh;
    display: flex; align-items: center; justify-content: center;
    text-align: center;
    background: radial-gradient(ellipse at 50% 60%, #1e1040 0%, #0a0f1e 70%);
    overflow: hidden;
    position: relative;
  }
  #promise-canvas {
    position: absolute; inset: 0;
    pointer-events: none; opacity: 0.5;
  }
  .promise-inner { position: relative; z-index: 2; padding: 2rem; }
  .promise-quote {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.5rem, 4vw, 2.6rem);
    font-weight: 500;
    line-height: 1.4;
    animation: glow-pulse 4s ease-in-out infinite;
    max-width: 640px; margin: 0 auto;
  }
  @keyframes glow-pulse {
    0%,100% { text-shadow: 0 0 30px rgba(249,168,212,0.2); }
    50% { text-shadow: 0 0 60px rgba(249,168,212,0.5), 0 0 100px rgba(249,168,212,0.2); }
  }
  .promise-sub {
    margin-top: 1.5rem;
    font-size: 0.8rem; letter-spacing: 0.2em; text-transform: uppercase;
    color: rgba(212,168,83,0.5);
  }

  /* â”€â”€ FOOTER â”€â”€ */
  footer {
    text-align: center;
    padding: 3rem 1.5rem;
    border-top: 1px solid rgba(255,255,255,0.05);
    font-size: 0.75rem;
    color: rgba(255,255,255,0.15);
    letter-spacing: 0.1em;
  }


  /* â”€â”€ WATERMARK â”€â”€ */
  #watermark {
    position: fixed;
    bottom: 1.6rem;
    right: 5.2rem;
    z-index: 9980;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 0.1rem;
    pointer-events: none;
    opacity: 0;
    transition: opacity 1.8s ease 1.2s;
  }
  #watermark.visible { opacity: 1; }
  #watermark .wm-label {
    font-size: 0.52rem;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color: rgba(212,168,83,0.38);
    font-family: 'Inter', sans-serif;
    font-weight: 400;
  }
  #watermark .wm-name {
    font-family: 'Playfair Display', serif;
    font-style: italic;
    font-size: 0.88rem;
    font-weight: 400;
    letter-spacing: 0.06em;
    background: linear-gradient(135deg, rgba(212,168,83,0.6), rgba(249,168,212,0.45));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1.2;
  }
  #watermark .wm-line {
    width: 100%;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(212,168,83,0.28));
    margin-top: 0.2rem;
  }
  @media (max-width: 600px) {
    #watermark { bottom: 1rem; right: 4.8rem; }
    #watermark .wm-name { font-size: 0.75rem; }
  }


  /* â”€â”€ ROSE RAIN â”€â”€ */
  #rose-canvas {
    position: fixed;
    inset: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 9970;
    opacity: 0;
    transition: opacity 2s ease;
  }
  #rose-canvas.visible { opacity: 1; }

  /* scrollbar */
  ::-webkit-scrollbar { width: 4px; }
  ::-webkit-scrollbar-track { background: var(--deep); }
  ::-webkit-scrollbar-thumb { background: rgba(249,168,212,0.2); border-radius: 2px; }

  @media (max-width: 600px) {
    .gate-panel { padding: 2rem 1.8rem; }
    .letter-paper { padding: 2rem 1.5rem; }
    .envelope { width: 260px; height: 175px; }
    section { padding: 4rem 1rem; }
  }

  /* â”€â”€ MUSIC BUTTON â”€â”€ */
  #music-btn {
    position: fixed;
    bottom: 2rem; right: 2rem;
    z-index: 9990;
    width: 52px; height: 52px;
    border-radius: 50%;
    background: rgba(15,23,42,0.7);
    border: 1px solid rgba(249,168,212,0.25);
    backdrop-filter: blur(16px);
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.35s ease;
    box-shadow: 0 0 20px rgba(249,168,212,0.1);
    opacity: 0;
    transform: translateY(10px);
  }
  #music-btn.visible {
    opacity: 1;
    transform: translateY(0);
  }
  #music-btn:hover {
    border-color: rgba(249,168,212,0.5);
    box-shadow: 0 0 30px rgba(249,168,212,0.25), 0 0 60px rgba(249,168,212,0.1);
    transform: scale(1.08);
  }
  #music-btn svg {
    width: 20px; height: 20px;
    fill: none; stroke: rgba(249,168,212,0.85);
    stroke-width: 1.8; stroke-linecap: round; stroke-linejoin: round;
    transition: opacity 0.2s;
  }
  #music-btn .music-tooltip {
    position: absolute;
    right: 62px;
    background: rgba(15,23,42,0.85);
    border: 1px solid rgba(249,168,212,0.15);
    backdrop-filter: blur(12px);
    padding: 0.35rem 0.8rem;
    border-radius: 6px;
    font-size: 0.68rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: rgba(249,168,212,0.7);
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.25s;
  }
  #music-btn:hover .music-tooltip { opacity: 1; }

  /* ripple pulse when playing */
  #music-btn.playing::after {
    content: '';
    position: absolute; inset: -6px;
    border-radius: 50%;
    border: 1px solid rgba(249,168,212,0.3);
    animation: ripple-ring 2s ease-out infinite;
  }
  @keyframes ripple-ring {
    0%  { transform: scale(1); opacity: 0.6; }
    100%{ transform: scale(1.5); opacity: 0; }
  }
</style>
</head>
<body>

<!-- Custom cursor -->
<div id="cursor"></div>
<div id="cursor-ring"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PASSWORD GATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="gate">
  <canvas id="gate-canvas"></canvas>
  <div class="gate-panel">
    <div class="gate-symbol">ğŸ¤</div>
    <div class="gate-title">A Message for You</div>
    <div class="gate-sub">Private Â· Personal Â· From the heart</div>
    <div class="input-wrap">
      <input id="pwd-input" type="password" placeholder="Enter passphrase" autocomplete="off" spellcheck="false"/>
    </div>
    <div class="gate-error" id="gate-error"></div>
    <button class="gate-btn" id="gate-btn">Enter</button>
    <div class="gate-hint">You already know the word.</div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MAIN CONTENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="main">

  <!-- HERO -->
  <section id="hero">
    <canvas id="galaxy-canvas"></canvas>
    <div class="vignette"></div>
    <div class="hero-text">
      <div class="hero-eyebrow">A farewell from a grateful student</div>
      <h1 class="hero-title">For My <span>Akka</span> ğŸ¤</h1>
      <p class="hero-sub">"Some bonds are built through respect, not just relation."</p>
      <div class="hero-scroll">â†“ &nbsp; Scroll to read</div>
    </div>
  </section>

  <!-- ENVELOPE -->
  <section id="envelope-section">
    <div class="container" style="text-align:center;">
      <div class="section-label reveal">Before You Read</div>
      <h2 class="section-title reveal" style="font-family:'Playfair Display',serif;">There is a letter here,<br/>waiting for you.</h2>
      <div class="env-wrap reveal" style="margin:0 auto;display:inline-block;">
        <div class="envelope" id="envelope" title="Click to open">
          <div class="env-body">
            <div class="env-label">
              <span class="env-to">To:</span>
              <span class="env-name">Harshuu ğŸ¤</span>
            </div>
          </div>
          <div class="env-flap"></div>
        </div>
        <div class="env-hint">Tap to open</div>
      </div>
    </div>
  </section>

  <!-- LETTER MODAL -->
  <div id="letter-reveal">
    <div class="letter-paper">
      <button class="close-btn" id="close-letter" title="Close">âœ•</button>
      <div id="typewriter-text"></div>
      <span class="cursor-blink" id="tw-cursor"></span>
    </div>
  </div>

  <!-- CARDS -->
  <section id="cards-section">
    <div class="container">
      <div class="section-label reveal">What You Gave Me</div>
      <h2 class="section-title reveal">Why you are<br/>extraordinary, Akka.</h2>
      <div class="cards-grid reveal">

        <div class="glass-card" data-desc="Your guidance was never just academic. It showed me how to walk with purpose, make decisions with clarity, and face the unknown without fear. You guided me when I didn't even know I needed it.">
          <span class="card-icon">ğŸŒ¸</span>
          <div class="card-title">Guidance</div>
          <div class="card-sub">Click to read</div>
          <div class="card-desc"></div>
        </div>

        <div class="glass-card" data-desc="Your sense of discipline wasn't strict â€” it was respectful. You showed me that structure is not a cage but a foundation. Because of you, I take my responsibilities seriously.">
          <span class="card-icon">ğŸ“˜</span>
          <div class="card-title">Discipline</div>
          <div class="card-sub">Click to read</div>
          <div class="card-desc"></div>
        </div>

        <div class="glass-card" data-desc="You may not realize how much small moments of care can mean. A word of encouragement, a moment of patience â€” those things stayed with me long after the class ended.">
          <span class="card-icon">ğŸ¤</span>
          <div class="card-title">Care</div>
          <div class="card-sub">Click to read</div>
          <div class="card-desc"></div>
        </div>

        <div class="glass-card" data-desc="Watching you â€” composed, confident, purposeful â€” inspired me silently. You didn't need to preach. You simply existed, and that was enough to make me want to be better.">
          <span class="card-icon">âœ¨</span>
          <div class="card-title">Inspiration</div>
          <div class="card-sub">Click to read</div>
          <div class="card-desc"></div>
        </div>

      </div>
    </div>
  </section>

  <!-- TIMELINE -->
  <section id="timeline-section">
    <div class="container">
      <div class="section-label reveal">The Journey</div>
      <h2 class="section-title reveal">Moments I will<br/>never forget.</h2>
      <div class="timeline">

        <div class="tl-item">
          <div class="tl-phase">Chapter One</div>
          <div class="tl-title">The First Impression</div>
          <div class="tl-body">You walked in â€” composed, unhurried. I remember thinking: this person knows exactly who she is. That composure silently taught me more than any textbook ever could.</div>
        </div>

        <div class="tl-item">
          <div class="tl-phase">Chapter Two</div>
          <div class="tl-title">The First Guidance</div>
          <div class="tl-body">The first time you corrected my path â€” not with harshness, but with patience â€” I felt seen. You didn't dismiss my effort. You elevated it. That is the mark of a great elder.</div>
        </div>

        <div class="tl-item">
          <div class="tl-phase">Chapter Three</div>
          <div class="tl-title">A Moment of Correction</div>
          <div class="tl-body">Your correction stung for a moment â€” but only because I cared. And you cared too. That is not discipline for its own sake. That is someone who wants you to genuinely grow.</div>
        </div>

        <div class="tl-item">
          <div class="tl-phase">Chapter Four</div>
          <div class="tl-title">The Last Day of College</div>
          <div class="tl-body">Tomorrow I walk out these gates. But I carry something with me that no certificate can represent â€” the memory of someone who unknowingly chose to become my Akka. ğŸ¤</div>
        </div>

      </div>
    </div>
  </section>

  <!-- PROMISE -->
  <section id="promise-section">
    <canvas id="promise-canvas"></canvas>
    <div class="promise-inner">
      <div class="section-label reveal" style="margin-bottom:1.5rem;">My Promise</div>
      <div class="promise-quote reveal">
        "I will always remain<br/>your little one ğŸ¤âœ¨"
      </div>
      <div class="promise-sub reveal">â€” With gratitude, always</div>
    </div>
  </section>

  <footer>
    Made with love and respect &nbsp;Â·&nbsp; A farewell that words barely hold &nbsp;Â·&nbsp; ğŸ¤
  </footer>


<!-- Watermark -->
<div id="watermark">
  <span class="wm-label">Created by</span>
  <span class="wm-name">Sankeerthan K</span>
  <div class="wm-line"></div>
</div>

<!-- Rose Rain Canvas -->
<canvas id="rose-canvas"></canvas>

</div><!-- /main -->

<!-- Music: generated via Web Audio API â€” no external file needed -->

<!-- Floating Music Button -->
<button id="music-btn" title="Toggle music" aria-label="Toggle background music">
  <span class="music-tooltip">Music</span>
  <svg id="icon-play" viewBox="0 0 24 24">
    <polygon points="5,3 19,12 5,21" stroke="rgba(249,168,212,0.85)" fill="rgba(249,168,212,0.15)"/>
  </svg>
  <svg id="icon-pause" viewBox="0 0 24 24" style="display:none;">
    <rect x="6" y="4" width="4" height="16" rx="1" fill="rgba(249,168,212,0.85)"/>
    <rect x="14" y="4" width="4" height="16" rx="1" fill="rgba(249,168,212,0.85)"/>
  </svg>
</button>

<!-- Three.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CUSTOM CURSOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const cursor = document.getElementById('cursor');
const ring = document.getElementById('cursor-ring');
let mx=0, my=0, rx=0, ry=0;
document.addEventListener('mousemove', e => { mx=e.clientX; my=e.clientY; cursor.style.left=mx+'px'; cursor.style.top=my+'px'; });
(function animCursor(){
  rx += (mx-rx)*0.12; ry += (my-ry)*0.12;
  ring.style.left=rx+'px'; ring.style.top=ry+'px';
  requestAnimationFrame(animCursor);
})();
document.querySelectorAll('button,a,.glass-card,.envelope,.env-wrap').forEach(el=>{
  el.addEventListener('mouseenter',()=>{cursor.style.width='20px';cursor.style.height='20px';ring.style.width='52px';ring.style.height='52px';});
  el.addEventListener('mouseleave',()=>{cursor.style.width='12px';cursor.style.height='12px';ring.style.width='36px';ring.style.height='36px';});
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GATE PARTICLE CANVAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(function(){
  const c = document.getElementById('gate-canvas');
  const ctx = c.getContext('2d');
  let w,h,pts=[];
  function resize(){ w=c.width=window.innerWidth; h=c.height=window.innerHeight; }
  resize(); window.addEventListener('resize',resize);
  for(let i=0;i<120;i++) pts.push({
    x:Math.random(), y:Math.random(),
    vx:(Math.random()-0.5)*0.0003, vy:(Math.random()-0.5)*0.0003,
    r:Math.random()*1.5+0.3, a:Math.random()
  });
  function draw(){
    ctx.clearRect(0,0,w,h);
    pts.forEach(p=>{
      p.x+=p.vx; p.y+=p.vy;
      if(p.x<0)p.x=1; if(p.x>1)p.x=0;
      if(p.y<0)p.y=1; if(p.y>1)p.y=0;
      ctx.beginPath();
      ctx.arc(p.x*w,p.y*h,p.r,0,Math.PI*2);
      ctx.fillStyle=`rgba(249,168,212,${p.a*0.6})`;
      ctx.fill();
    });
    requestAnimationFrame(draw);
  }
  draw();
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PASSWORD GATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const PASSWORD = 'Harshuu';
const gateEl = document.getElementById('gate');
const mainEl = document.getElementById('main');
const input = document.getElementById('pwd-input');
const errorEl = document.getElementById('gate-error');

function tryUnlock(){
  if(input.value === PASSWORD){
    gateEl.classList.add('dissolve');
    setTimeout(()=>{ gateEl.style.display='none'; },1300);
    mainEl.classList.add('visible');
    sessionStorage.setItem('akka_unlocked','1');
    initGalaxy();
    initPromiseCanvas();
    initRoseRain();
    initHearts();
  } else {
    input.classList.add('shake');
    errorEl.textContent = 'That is not the word. Try once more.';
    setTimeout(()=>{ input.classList.remove('shake'); input.value=''; },500);
  }
}

if(sessionStorage.getItem('akka_unlocked')){
  gateEl.style.display='none';
  mainEl.classList.add('visible');
  setTimeout(()=>{ initGalaxy(); initPromiseCanvas(); initRoseRain(); initHearts(); },100);
}

document.getElementById('gate-btn').addEventListener('click', tryUnlock);
input.addEventListener('keydown', e=>{ if(e.key==='Enter') tryUnlock(); });

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GALAXY (Three.js)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function initGalaxy(){
  const canvas = document.getElementById('galaxy-canvas');
  const renderer = new THREE.WebGLRenderer({canvas, antialias:true, alpha:true});
  renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));
  renderer.setClearColor(0x000000, 0);

  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(60, canvas.clientWidth/canvas.clientHeight, 0.1, 500);
  camera.position.set(0, 2, 8);
  camera.lookAt(0,0,0);

  function resize(){
    const w=canvas.clientWidth, h=canvas.clientHeight;
    renderer.setSize(w,h,false);
    camera.aspect=w/h; camera.updateProjectionMatrix();
  }
  resize(); window.addEventListener('resize',resize);

  // Stars
  const count = 6000;
  const geo = new THREE.BufferGeometry();
  const pos = new Float32Array(count*3);
  const col = new Float32Array(count*3);
  const roseC = new THREE.Color('#f9a8d4');
  const goldC = new THREE.Color('#d4a853');
  const blueC = new THREE.Color('#93c5fd');
  const palette = [roseC, goldC, blueC, new THREE.Color('#e2e8f0')];

  for(let i=0;i<count;i++){
    const arm = Math.floor(Math.random()*3);
    const angle = (arm/3)*Math.PI*2 + Math.random()*0.8;
    const dist = Math.pow(Math.random(),0.6)*10;
    const spread = (1-dist/10)*0.4;
    pos[i*3]   = Math.cos(angle)*dist + (Math.random()-0.5)*spread*2;
    pos[i*3+1] = (Math.random()-0.5)*1.5;
    pos[i*3+2] = Math.sin(angle)*dist + (Math.random()-0.5)*spread*2;
    const c = palette[Math.floor(Math.random()*palette.length)];
    col[i*3]=c.r; col[i*3+1]=c.g; col[i*3+2]=c.b;
  }
  geo.setAttribute('position', new THREE.BufferAttribute(pos,3));
  geo.setAttribute('color', new THREE.BufferAttribute(col,3));

  const mat = new THREE.PointsMaterial({
    size:0.06, vertexColors:true, transparent:true, opacity:0.85,
    sizeAttenuation:true
  });
  const stars = new THREE.Points(geo,mat);
  scene.add(stars);

  // Ambient dust
  const dustGeo = new THREE.BufferGeometry();
  const dustPos = new Float32Array(1500*3);
  for(let i=0;i<1500;i++){
    dustPos[i*3]=(Math.random()-0.5)*25;
    dustPos[i*3+1]=(Math.random()-0.5)*5;
    dustPos[i*3+2]=(Math.random()-0.5)*25;
  }
  dustGeo.setAttribute('position',new THREE.BufferAttribute(dustPos,3));
  const dustMat = new THREE.PointsMaterial({size:0.02,color:0xffffff,transparent:true,opacity:0.25});
  scene.add(new THREE.Points(dustGeo,dustMat));

  let t=0;
  function animate(){
    requestAnimationFrame(animate);
    t+=0.0003;
    stars.rotation.y = t;
    camera.position.y = Math.sin(t*0.5)*0.3 + 2;
    renderer.render(scene,camera);
  }
  animate();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROMISE CANVAS (floating particles)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function initPromiseCanvas(){
  const c = document.getElementById('promise-canvas');
  const ctx = c.getContext('2d');
  let w,h;
  function resize(){ w=c.width=c.clientWidth; h=c.height=c.clientHeight; }
  resize(); window.addEventListener('resize',resize);
  const pts=[];
  for(let i=0;i<60;i++) pts.push({
    x:Math.random()*100, y:Math.random()*100+10,
    vy:-(Math.random()*0.04+0.01),
    r:Math.random()*2+0.5, a:Math.random()*0.5+0.1
  });
  function draw(){
    ctx.clearRect(0,0,w,h);
    pts.forEach(p=>{
      p.y+=p.vy;
      if(p.y<-5){ p.y=105; p.x=Math.random()*100; }
      ctx.beginPath();
      ctx.arc(p.x/100*w,p.y/100*h,p.r,0,Math.PI*2);
      ctx.fillStyle=`rgba(249,168,212,${p.a})`;
      ctx.fill();
    });
    requestAnimationFrame(draw);
  }
  draw();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ENVELOPE + LETTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const envelope = document.getElementById('envelope');
const letterReveal = document.getElementById('letter-reveal');
const closeBtn = document.getElementById('close-letter');
const twText = document.getElementById('typewriter-text');
const twCursor = document.getElementById('tw-cursor');

const LETTER = `ğŸ’Œ My Dearest Akka ğŸ¤

Today is my last day in collegeâ€¦ and everyone keeps asking me how I feel. I smile and say I'm fine. I tell them it's just another day, just the end of a chapter.

But the truth is, my heart feels heavier than I expected.

Because leaving college doesn't just mean leaving classrooms, corridors, and memories.
It means walking away from the person who became my comfort hereâ€¦ you.

I don't think you will ever truly understand what you mean to me.

When I first met you, you were my teacher â€” someone I respected, someone I admired from a distance. But slowly, without me even realizing, something changed. Your presence stopped feeling formal. It started feeling familiar. Safe.

Somewhere between lectures and small conversations, you became more than just a teacher to me. You became my elder sister â€” not just in words, but in the way you cared, the way you corrected me, the way you silently stood by me.

You filled a space in my life that I didn't even know was empty.

There were days when your simple "Are you okay?" meant more to me than you could imagine. In a world where everyone is busy, that small concern felt like warmth. Your scoldings never felt harsh â€” they felt protective. Your advice never felt ordinary â€” it felt like strength being handed to me.

And your presenceâ€¦ your presence felt like safety.

Now the thought of not seeing you every day hurts more than I thought it would. I won't have those small, unnoticed moments anymore â€” the random talks, the caring warnings, the subtle smiles, the familiar voice in the classroom.

People say college memories fade with time.
But I know one thing for sure â€” you will never fade from my heart.

Sometimes I feel scaredâ€¦ scared that maybe you don't know how deeply I'm attached to you. Maybe you think I'm just another student who will graduate and move on. And yes, life will move forward. I will grow. You will continue guiding many others.

But you are not just a chapter in my college story.
You are an emotion I will carry with me.

You have a place in my heart that no one else can ever take. Not because of how long I've known you. Not because of circumstances. But because of how you made me feel â€” valued, guided, seen, and cared for.

Even if life becomes busy.
Even if conversations become rare.
Even if distance grows quietly between us.

My respect for you will never reduce.
My affection for you will never fade.
My bond with you will never change.

You are my elder sister by heart. And that truth does not depend on classrooms or college walls.

If I could, I would freeze time â€” just to stay a little longer in these ordinary moments that became extraordinary because you were in them.

I am going to miss you in ways I cannot fully explain. And maybe a part of me will always remain here â€” in these corridors, in that classroom, in those small conversations â€” where you are.

Thank you for being the most beautiful part of my college journey.
Thank you for unknowingly becoming my Akka.

No matter how far life takes me,
a part of my heart will always stay where you are.

Not as a studentâ€¦ but as your little one,
forever grateful for you. ğŸ¤âœ¨`;

let typeInterval=null, charIdx=0, isTyping=false;

function startTypewriter(){
  if(isTyping) return;
  isTyping=true; charIdx=0; twText.textContent='';
  typeInterval = setInterval(()=>{
    if(charIdx < LETTER.length){
      twText.textContent += LETTER[charIdx++];
      // Auto scroll
      const paper = twText.closest('.letter-paper');
      if(paper) paper.scrollTop = paper.scrollHeight;
    } else {
      clearInterval(typeInterval);
      twCursor.style.display='none';
    }
  }, 28);
}

envelope.addEventListener('click', ()=>{
  envelope.classList.toggle('open');
  if(envelope.classList.contains('open')){
    setTimeout(()=>{
      letterReveal.classList.add('open');
      twCursor.style.display='inline-block';
      startTypewriter();
    }, 700);
  }
});

closeBtn.addEventListener('click', ()=>{
  letterReveal.classList.remove('open');
  envelope.classList.remove('open');
  if(typeInterval) clearInterval(typeInterval);
  isTyping=false;
});

letterReveal.addEventListener('click', e=>{
  if(e.target === letterReveal){
    letterReveal.classList.remove('open');
    envelope.classList.remove('open');
    if(typeInterval) clearInterval(typeInterval);
    isTyping=false;
  }
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.querySelectorAll('.glass-card').forEach(card=>{
  const desc = card.querySelector('.card-desc');
  const sub = card.querySelector('.card-sub');
  desc.textContent = card.dataset.desc;
  card.addEventListener('click',()=>{
    const open = card.classList.toggle('expanded');
    sub.textContent = open ? 'Click to close' : 'Click to read';
  });
});


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ROSE RAIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function initRoseRain(){
  const canvas = document.getElementById('rose-canvas');
  const ctx = canvas.getContext('2d');
  canvas.classList.add('visible');

  let W, H;
  function resize(){ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; }
  resize();
  window.addEventListener('resize', resize);

  // Petal shapes â€” drawn as SVG-style bezier paths scaled to size
  function drawPetal(ctx, x, y, size, angle, alpha, color){
    ctx.save();
    ctx.translate(x, y);
    ctx.rotate(angle);
    ctx.globalAlpha = alpha;

    // Petal: two bezier curves forming an elliptical leaf shape
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.bezierCurveTo(
      size * 0.6,  -size * 0.3,
      size * 0.8,   size * 0.5,
      0,            size
    );
    ctx.bezierCurveTo(
      -size * 0.8,  size * 0.5,
      -size * 0.6, -size * 0.3,
      0,            0
    );

    // Gradient fill â€” rose pink to soft white
    const grad = ctx.createLinearGradient(0, 0, size * 0.3, size);
    grad.addColorStop(0, color.top);
    grad.addColorStop(1, color.bottom);
    ctx.fillStyle = grad;
    ctx.fill();

    // Subtle petal vein
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.quadraticCurveTo(size * 0.1, size * 0.5, 0, size);
    ctx.strokeStyle = `rgba(255,255,255,${alpha * 0.25})`;
    ctx.lineWidth = 0.4;
    ctx.stroke();

    ctx.restore();
  }

  // Petal color variants
  const COLORS = [
    { top: 'rgba(249,168,212,0.95)', bottom: 'rgba(255,220,235,0.6)' },
    { top: 'rgba(244,114,182,0.85)', bottom: 'rgba(249,168,212,0.5)' },
    { top: 'rgba(255,240,245,0.9)',  bottom: 'rgba(249,168,212,0.4)' },
    { top: 'rgba(212,100,160,0.8)',  bottom: 'rgba(249,168,212,0.55)'},
    { top: 'rgba(255,200,225,0.88)', bottom: 'rgba(255,255,255,0.3)' },
  ];

  // Petals array
  const PETAL_COUNT = 38;
  const petals = [];

  function createPetal(fromTop){
    const size = Math.random() * 18 + 10;
    return {
      x: Math.random() * W,
      y: fromTop ? -size * 2 - Math.random() * H * 0.3 : Math.random() * H,
      size,
      speedY: Math.random() * 1.2 + 0.5,
      speedX: (Math.random() - 0.5) * 0.6,
      angle: Math.random() * Math.PI * 2,
      spin:  (Math.random() - 0.5) * 0.025,
      swing: Math.random() * Math.PI * 2,
      swingSpeed: Math.random() * 0.018 + 0.008,
      swingAmp: Math.random() * 55 + 20,
      alpha: Math.random() * 0.55 + 0.25,
      color: COLORS[Math.floor(Math.random() * COLORS.length)],
      wobble: 0,
    };
  }

  for(let i = 0; i < PETAL_COUNT; i++) petals.push(createPetal(false));

  // Spawn new petals gradually
  let spawnTimer = 0;

  function animate(){
    ctx.clearRect(0, 0, W, H);
    spawnTimer++;
    if(spawnTimer % 18 === 0 && petals.length < 65){
      petals.push(createPetal(true));
    }

    petals.forEach((p, i) => {
      p.swing += p.swingSpeed;
      p.angle += p.spin;
      p.wobble = Math.sin(p.swing) * p.swingAmp;

      p.y += p.speedY;
      p.x += p.speedX + Math.sin(p.swing * 0.7) * 0.4;

      // Gentle alpha fade near bottom
      let alpha = p.alpha;
      if(p.y > H * 0.82) alpha *= (1 - (p.y - H * 0.82) / (H * 0.18));

      drawPetal(ctx, p.x + Math.sin(p.swing * 0.5) * 12, p.y, p.size, p.angle, Math.max(0, alpha), p.color);

      // Reset when off screen
      if(p.y > H + p.size * 3 || alpha <= 0.01){
        petals[i] = createPetal(true);
      }
    });

    requestAnimationFrame(animate);
  }
  animate();
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FLOATING HEARTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function initHearts(){
  const canvas = document.getElementById('rose-canvas'); // reuse same canvas layer
  // We'll draw hearts on a separate canvas
  const hCanvas = document.createElement('canvas');
  hCanvas.style.cssText = 'position:fixed;inset:0;width:100%;height:100%;pointer-events:none;z-index:9969;';
  document.body.appendChild(hCanvas);
  const ctx = hCanvas.getContext('2d');

  let W, H;
  function resize(){ W = hCanvas.width = window.innerWidth; H = hCanvas.height = window.innerHeight; }
  resize();
  window.addEventListener('resize', resize);

  function drawHeart(ctx, x, y, size, angle, alpha, color){
    ctx.save();
    ctx.translate(x, y);
    ctx.rotate(angle);
    ctx.globalAlpha = alpha;
    ctx.scale(size, size);

    ctx.beginPath();
    // Classic heart shape via bezier
    ctx.moveTo(0, -0.5);
    ctx.bezierCurveTo( 0.5, -1.1,  1.2, -0.4,  1.2,  0.2);
    ctx.bezierCurveTo( 1.2,  0.8,  0.6,  1.3,  0,    1.7);
    ctx.bezierCurveTo(-0.6,  1.3, -1.2,  0.8, -1.2,  0.2);
    ctx.bezierCurveTo(-1.2, -0.4, -0.5, -1.1,  0,   -0.5);

    const grad = ctx.createRadialGradient(-0.2, -0.2, 0.1, 0, 0.5, 1.5);
    grad.addColorStop(0, color.inner);
    grad.addColorStop(1, color.outer);
    ctx.fillStyle = grad;
    ctx.fill();

    // Tiny shine
    ctx.beginPath();
    ctx.arc(-0.35, -0.25, 0.22, 0, Math.PI * 2);
    ctx.fillStyle = `rgba(255,255,255,${alpha * 0.45})`;
    ctx.fill();

    ctx.restore();
  }

  const HEART_COLORS = [
    { inner: 'rgba(255,120,160,0.95)', outer: 'rgba(220,60,100,0.7)'  },
    { inner: 'rgba(255,180,200,0.9)',  outer: 'rgba(249,100,140,0.65)'},
    { inner: 'rgba(255,220,230,0.88)', outer: 'rgba(249,168,212,0.6)' },
    { inner: 'rgba(212,60,100,0.9)',   outer: 'rgba(160,30,70,0.65)'  },
    { inner: 'rgba(255,150,180,0.85)', outer: 'rgba(200,80,120,0.6)'  },
  ];

  const HEART_COUNT = 22;
  const hearts = [];

  function createHeart(fromTop){
    const size = Math.random() * 10 + 5;
    return {
      x: Math.random() * W,
      y: fromTop ? -size * 4 - Math.random() * H * 0.2 : Math.random() * H,
      size,
      speedY: Math.random() * 0.9 + 0.3,
      speedX: (Math.random() - 0.5) * 0.4,
      angle:  (Math.random() - 0.5) * 0.5,
      spin:   (Math.random() - 0.5) * 0.012,
      swing:  Math.random() * Math.PI * 2,
      swingSpeed: Math.random() * 0.014 + 0.006,
      swingAmp:   Math.random() * 40 + 15,
      alpha:  Math.random() * 0.5 + 0.2,
      // pulsing
      pulse:  Math.random() * Math.PI * 2,
      pulseSpeed: Math.random() * 0.04 + 0.02,
      color:  HEART_COLORS[Math.floor(Math.random() * HEART_COLORS.length)],
    };
  }

  for(let i = 0; i < HEART_COUNT; i++) hearts.push(createHeart(false));

  let spawnT = 0;

  function animateHearts(){
    ctx.clearRect(0, 0, W, H);
    spawnT++;
    if(spawnT % 28 === 0 && hearts.length < 40){
      hearts.push(createHeart(true));
    }

    hearts.forEach((h, i) => {
      h.swing     += h.swingSpeed;
      h.angle     += h.spin;
      h.pulse     += h.pulseSpeed;
      h.y         += h.speedY;
      h.x         += h.speedX + Math.sin(h.swing * 0.6) * 0.3;

      // Pulse size gently
      const pulsedSize = h.size * (1 + Math.sin(h.pulse) * 0.08);

      let alpha = h.alpha;
      if(h.y > H * 0.85) alpha *= (1 - (h.y - H * 0.85) / (H * 0.15));

      drawHeart(ctx, h.x + Math.sin(h.swing * 0.4) * 10, h.y, pulsedSize, h.angle, Math.max(0, alpha), h.color);

      if(h.y > H + h.size * 5 || alpha <= 0.01){
        hearts[i] = createHeart(true);
      }
    });

    requestAnimationFrame(animateHearts);
  }
  animateHearts();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCROLL REVEAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const observer = new IntersectionObserver((entries)=>{
  entries.forEach(e=>{
    if(e.isIntersecting){ e.target.classList.add('in-view'); }
  });
}, { threshold: 0.12 });

document.querySelectorAll('.reveal, .tl-item').forEach(el=>observer.observe(el));

/* stagger tl items */
document.querySelectorAll('.tl-item').forEach((el,i)=>{
  el.style.transitionDelay = (i*0.15)+'s';
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MUSIC â€” Cinematic Emotional Piano
   Web Audio API, no external files
   Inspired by: Yiruma / Einaudi style
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const musicBtn = document.getElementById('music-btn');
const iconPlay  = document.getElementById('icon-play');
const iconPause = document.getElementById('icon-pause');

let audioCtx = null, masterGain = null, reverbNode = null;
let isPlaying = false, scheduleTimer = null;
let nextBeatTime = 0, beatIndex = 0;

// â”€â”€ Tuning â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const BPM      = 58;                      // slow, breathing tempo
const BEAT     = 60 / BPM;               // one quarter note
const Q        = BEAT;                    // quarter
const H        = BEAT * 2;               // half
const DH       = BEAT * 3;               // dotted half
const W        = BEAT * 4;               // whole

// â”€â”€ Frequencies (equal temperament) â”€â”€â”€â”€â”€
const f = {
  B2:123.47, C3:130.81, D3:146.83, E3:164.81, F3:174.61, G3:196.00, A3:220.00, Bb3:233.08,
  B3:246.94, C4:261.63, Db4:277.18, D4:293.66, Eb4:311.13, E4:329.63, F4:349.23,
  Gb4:369.99, G4:392.00, Ab4:415.30, A4:440.00, Bb4:466.16, B4:493.88,
  C5:523.25, Db5:554.37, D5:587.33, Eb5:622.25, E5:659.25, F5:698.46,
  G5:783.99, Ab5:830.61, A5:880.00, Bb5:932.33, C6:1046.50
};

// â”€â”€ Composition â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Each entry: { melody, bass, dur }
// melody = freq or null, bass = [freq,...] or []
// 4-bar loop: Am - F - C - G/B  (classic emotional progression)
const SCORE = [
  // Bar 1 â€” Am  (A minor)
  { m:f.E5,  b:[f.A2, f.E3, f.A3], dur:H   },
  { m:f.C5,  b:[],                  dur:Q   },
  { m:f.D5,  b:[f.A2, f.E3, f.A3], dur:Q   },
  { m:f.E5,  b:[],                  dur:H   },
  { m:f.A4,  b:[f.A2, f.C3, f.E3], dur:H   },

  // Bar 2 â€” F major
  { m:f.F4,  b:[f.F2, f.C3, f.F3], dur:Q   },
  { m:f.A4,  b:[],                  dur:Q   },
  { m:f.C5,  b:[f.F2, f.A3, f.C4], dur:H   },
  { m:f.Bb4, b:[],                  dur:Q   },
  { m:f.A4,  b:[f.F2, f.C3, f.F3], dur:Q   },

  // Bar 3 â€” C major
  { m:f.G4,  b:[f.C3, f.G3, f.C4], dur:Q   },
  { m:f.E5,  b:[],                  dur:Q   },
  { m:f.D5,  b:[f.C3, f.E3, f.G3], dur:H   },
  { m:f.C5,  b:[],                  dur:Q   },
  { m:f.B4,  b:[f.C3, f.G3, f.C4], dur:Q   },

  // Bar 4 â€” G/B (resolve back)
  { m:f.G4,  b:[f.B2, f.D3, f.G3], dur:Q   },
  { m:f.A4,  b:[],                  dur:Q   },
  { m:f.B4,  b:[f.G2, f.B3, f.D4], dur:H   },
  { m:f.C5,  b:[],                  dur:Q   },
  { m:f.E5,  b:[f.A2, f.E3, f.A3], dur:Q   },

  // Bar 5 â€” Am (higher, more intense)
  { m:f.A5,  b:[f.A2, f.E3, f.A3], dur:H   },
  { m:f.G5,  b:[],                  dur:Q   },
  { m:f.F5,  b:[f.A2, f.C4, f.E4], dur:Q   },
  { m:f.E5,  b:[],                  dur:H   },
  { m:f.D5,  b:[f.A2, f.E3, f.A3], dur:H   },

  // Bar 6 â€” F major (lush)
  { m:f.C5,  b:[f.F2, f.A3, f.C4], dur:H   },
  { m:f.Bb4, b:[],                  dur:Q   },
  { m:f.A4,  b:[f.F2, f.C3, f.F3], dur:Q   },
  { m:f.G4,  b:[],                  dur:H   },
  { m:f.F4,  b:[f.F2, f.A3, f.C4], dur:H   },

  // Bar 7 â€” C major (breathe)
  { m:null,  b:[f.C3, f.G3, f.C4], dur:Q   },
  { m:f.E5,  b:[],                  dur:Q   },
  { m:f.D5,  b:[f.C3, f.E3, f.G3], dur:H   },
  { m:f.C5,  b:[],                  dur:Q   },
  { m:f.B4,  b:[f.C3, f.G3, f.E4], dur:Q   },

  // Bar 8 â€” Am resolve (gentle end before loop)
  { m:f.A4,  b:[f.A2, f.E3, f.A3], dur:H   },
  { m:f.G4,  b:[],                  dur:Q   },
  { m:f.E4,  b:[f.A2, f.C3, f.E3], dur:Q   },
  { m:f.A4,  b:[],                  dur:DH  },
  { m:null,  b:[f.A2, f.E3, f.A3], dur:Q   },
];

// â”€â”€ Audio helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function makeReverb(ctx){
  // Simple convolution reverb using noise impulse
  const len = ctx.sampleRate * 2.8;
  const buf = ctx.createBuffer(2, len, ctx.sampleRate);
  for(let c=0;c<2;c++){
    const d = buf.getChannelData(c);
    for(let i=0;i<len;i++) d[i] = (Math.random()*2-1) * Math.pow(1 - i/len, 2.2);
  }
  const conv = ctx.createConvolver();
  conv.buffer = buf;
  return conv;
}

function playPianoNote(freq, time, dur, vol, ctx, dest){
  if(!freq || !ctx) return;

  // Layer 1: fundamental (sine â€” warm core)
  const osc1 = ctx.createOscillator();
  osc1.type = 'sine';
  osc1.frequency.value = freq;

  // Layer 2: second harmonic (triangle â€” slight brightness)
  const osc2 = ctx.createOscillator();
  osc2.type = 'triangle';
  osc2.frequency.value = freq * 2;

  // Layer 3: fourth harmonic (very soft â€” air)
  const osc3 = ctx.createOscillator();
  osc3.type = 'sine';
  osc3.frequency.value = freq * 4;

  const g1 = ctx.createGain(), g2 = ctx.createGain(), g3 = ctx.createGain();
  const master = ctx.createGain();
  const filter = ctx.createBiquadFilter();
  filter.type = 'lowpass';
  filter.frequency.value = 3800;
  filter.Q.value = 0.5;

  // Piano-style ADSR
  const atk = 0.008, dec = dur * 0.25, sus = vol * 0.45, rel = dur * 0.65;
  master.gain.setValueAtTime(0, time);
  master.gain.linearRampToValueAtTime(vol, time + atk);
  master.gain.exponentialRampToValueAtTime(sus, time + atk + dec);
  master.gain.setValueAtTime(sus, time + dur - rel * 0.1);
  master.gain.exponentialRampToValueAtTime(0.0001, time + dur + rel * 0.3);

  g1.gain.value = 1.0;
  g2.gain.value = 0.18;
  g3.gain.value = 0.04;

  [osc1,osc2,osc3].forEach((o,i)=>{
    const g = [g1,g2,g3][i];
    o.connect(g); g.connect(filter);
    o.start(time); o.stop(time + dur + rel + 0.1);
  });
  filter.connect(master);
  master.connect(dest);
}

function playBassNote(freq, time, dur, vol, ctx, dest){
  if(!freq || !ctx) return;
  const osc = ctx.createOscillator();
  osc.type = 'sine';
  osc.frequency.value = freq;
  const gain = ctx.createGain();
  gain.gain.setValueAtTime(0, time);
  gain.gain.linearRampToValueAtTime(vol, time + 0.015);
  gain.gain.exponentialRampToValueAtTime(vol * 0.3, time + dur * 0.4);
  gain.gain.exponentialRampToValueAtTime(0.0001, time + dur * 1.1);
  osc.connect(gain); gain.connect(dest);
  osc.start(time); osc.stop(time + dur * 1.2);
}

// â”€â”€ Scheduler â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function scheduleNotes(){
  if(!isPlaying || !audioCtx) return;

  while(nextBeatTime < audioCtx.currentTime + 0.35){
    const note = SCORE[beatIndex % SCORE.length];
    const t    = nextBeatTime;
    const dur  = note.dur;

    // Melody
    if(note.m) playPianoNote(note.m, t, dur, 0.22, audioCtx, reverbNode);

    // Bass chord â€” arpeggiate slightly for realism
    note.b.forEach((freq, i) => {
      playBassNote(freq, t + i * 0.03, dur * 1.3, 0.10, audioCtx, reverbNode);
    });

    nextBeatTime += dur;
    beatIndex++;
  }
  scheduleTimer = setTimeout(scheduleNotes, 80);
}

// â”€â”€ Start / Stop â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startMusic(){
  audioCtx  = new (window.AudioContext || window.webkitAudioContext)();
  masterGain = audioCtx.createGain();
  masterGain.gain.setValueAtTime(0, audioCtx.currentTime);
  masterGain.gain.linearRampToValueAtTime(1, audioCtx.currentTime + 4.5);

  // Reverb â†’ dry mix
  reverbNode = makeReverb(audioCtx);
  const reverbGain = audioCtx.createGain();
  reverbGain.gain.value = 0.45;
  const dryGain = audioCtx.createGain();
  dryGain.gain.value = 0.7;

  reverbNode.connect(reverbGain);
  reverbGain.connect(masterGain);
  // Notes also connect directly for dry signal
  masterGain.connect(audioCtx.destination);

  // Override destination in play functions to masterGain dry path
  reverbNode._dryDest = masterGain;

  nextBeatTime = audioCtx.currentTime + 0.15;
  beatIndex    = 0;
  isPlaying    = true;
  scheduleNotes();
}

function stopMusic(){
  isPlaying = false;
  clearTimeout(scheduleTimer);
  if(masterGain && audioCtx){
    masterGain.gain.linearRampToValueAtTime(0.0001, audioCtx.currentTime + 2.0);
    setTimeout(()=>{ try{ audioCtx.close(); }catch(e){} audioCtx=null; masterGain=null; reverbNode=null; }, 2200);
  }
}

// â”€â”€ UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setPlaying(p){
  iconPlay.style.display  = p ? 'none'  : 'block';
  iconPause.style.display = p ? 'block' : 'none';
  p ? musicBtn.classList.add('playing') : musicBtn.classList.remove('playing');
}
function showMusicBtn(){ musicBtn.classList.add('visible'); }

const mainObserver = new MutationObserver(()=>{
  if(mainEl.classList.contains('visible')) showMusicBtn();
});
mainObserver.observe(mainEl, { attributes: true, attributeFilter: ['class'] });
if(mainEl.classList.contains('visible')) showMusicBtn();

musicBtn.addEventListener('click', ()=>{
  if(!isPlaying){ startMusic(); setPlaying(true); }
  else          { stopMusic();  setPlaying(false); }
});


/* Show watermark after unlock */
const wmEl = document.getElementById('watermark');
const wmObserver = new MutationObserver(()=>{
  if(mainEl.classList.contains('visible')) wmEl.classList.add('visible');
});
wmObserver.observe(mainEl, { attributes: true, attributeFilter: ['class'] });
if(mainEl.classList.contains('visible')) wmEl.classList.add('visible');

</script>
</body>
</html>
